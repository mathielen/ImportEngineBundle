mathielen_import_engine:
    storageprovider:
        upload:
            type: upload
            uri: /tmp/uploaddir
        local:
            type: directory
            uri: /tmp/cached
        doctrine:
            type: doctrine
            queries:
                - SELECT id FROM Acme\DemoBundle\Entity\Person P WHERE P.age > 10
                - Acme\DemoBundle\Entity\ImportData
        services:
            type: service
            services:
                export_serviceA: [exportMethod1, exportMethod2]
                export_serviceB: ~
    importers:
        maximum_importer:
            preconditions:
                format: ['excel', 'csv']
                fieldcount: 2
                fields:
                    - 'header2'
                    - 'header1'
                fieldset:
                    - 'header1'
                    - 'header2'
                filename: ['regexp1', 'regexp2']
            object_factory:
                type: jms_serializer
                class: Acme\DemoBundle\ValueObject\MyImportedRow
            validation:
                options:
                    allowExtraFields: false
                    allowMissingFields: true
                target: ~
            target:
                type: service
                service: import_service
                method: processImportRow
        doctrine_importer:
            preconditions:
                format: excel
                filename: regexp1
            source:
                type: file
                uri: /tmp/import.csv
                format: csv
            validation:
                source:
                    header1: email
                    header2: url
                target:
                    header1: notempty
                    header2: notempty
            target:
                type: doctrine
                entity: Acme\DemoBundle\Entity\MyImportedEntity
